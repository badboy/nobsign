language: rust
sudo: false
addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - libcurl4-openssl-dev
      - libelf-dev
      - libdw-dev
      - g++-4.8

# run builds for both all the trains
rust:
  - nightly
  - beta
  - stable

before_script:
  - |
      pip install 'travis-cargo<0.2' --user &&
      export PATH=$HOME/.local/bin:$PATH

script:
  - |
      travis-cargo build &&
      travis-cargo test &&
      travis-cargo --only stable doc
after_success:
  - travis-cargo --only stable doc-upload
  - travis-cargo coveralls --no-sudo

env:
  global:
    - CC=gcc-4.8
    - CXX=g++-4.8
    - TRAVIS_CARGO_NIGHTLY_FEATURE=""
    - secure: "PsR0Mg04pydnTP/8dksrCNaPn+x4LCHiX3BufvM+VsemEg42zQPnciuSQTl0ywhOn1Q45L4OzJBjVmBgh9f5MOygXYne0kCm0WlEoXlkVeQ+drigfg7079rY44tUUp+oZqIIkJpZSEwFqfG0iB1PYft1WiLlUmqOcCJnTfBKVvIik6vJ5zGkSWtKXCaxbjw8vngf750FLgnIs5e86DW/bmW5Px2noqK2ZV+I/4SCLaTwGAXvxE+i8DIroHD801gB2ADFsIlfhevWZz20dy+r1FwBNF53TBPJDbKAoFudyKjzQH3Ne7Fqabin1Y6FnQ68SSde0rSeCNMsu3LV3EsyMB6ixmUIPyAQkw2s4UgTSUktHVarccT+MbxBkuZbVNmV8YH6EIG4xVblQTjd5AojY/Q49d27XKhddyuGXe0rhy27Ko6cR/1p8eUHfC/xcQmAw5QyC2cHLhfPVc9JF7H86a8KuD9vMfTWctx8a/O4aOxo+tCRcHgL1z0klrt82JkU9QB5rHxer1r9b9fztNY/o0wv1yt3r7rsajTPrEqMN3pBY+fOpfhR2Dj1+wM/eFf0dhNA+N61yWtpXtuMoIYTIbplqq+kDmwikft/1PfR1heR/cB0ANZJ0uz8abWYEgyHtznaeVhfDFPF/ag8xu3qe5wWjCY9oRMK+GnukC+Gw9Y="
